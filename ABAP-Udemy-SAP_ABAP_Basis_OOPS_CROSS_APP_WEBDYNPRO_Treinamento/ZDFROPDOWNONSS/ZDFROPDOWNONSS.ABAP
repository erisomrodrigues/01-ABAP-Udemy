REPORT ZDFROPDOWNONSS.

PARAMETERS P_D1 AS LISTBOX VISIBLE LENGTH 10.

TYPES: BEGIN OF TY_CHILD,
         PINCODE TYPE ZDPINCODE,
       END OF TY_CHILD.

DATA: IT_CHILD  TYPE TABLE OF TY_CHILD,
      WA_CHILD  TYPE TY_CHILD,
      IT_VALUES TYPE VRM_VALUES,
      WA_VALUES TYPE VRM_VALUE,
      LV_ID     TYPE VRM_ID.

AT SELECTION-SCREEN OUTPUT.
  SELECT PINCODE FROM ZDCHILDTABLE INTO TABLE IT_CHILD UP TO 6 ROWS.
  IF IT_CHILD IS NOT INITIAL.
    LOOP AT IT_CHILD INTO WA_CHILD.
      WA_VALUES-KEY = WA_CHILD-PINCODE.
      WA_VALUES-TEXT  = WA_CHILD-PINCODE.
      APPEND WA_VALUES TO IT_VALUES.
      CLEAR WA_VALUES.
    ENDLOOP.
  ENDIF.
  LV_ID = 'P_D1'.

  CALL FUNCTION 'VRM_SET_VALUES'
    EXPORTING
      ID                    = LV_ID
      VALUES                = IT_VALUES
*   EXCEPTIONS
*     ID_ILLEGAL_NAME       = 1
*     OTHERS                = 2
            .
  IF SY-SUBRC <> 0.
* Implement suitable error handling here
  ENDIF.
